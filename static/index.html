<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">
    <link rel="stylesheet" type="text/css" href="/main.css">
    <title>shh!</title>
  </head>
  <body>
    <main>
      <h1>shh!</h1>
      <p>Share passwords <span class="nowrap">(or other secrets)</span> via expiring <span class="nowrap">one-time links.</span></p>
      <form action="/secrets" method="POST">
        <input id="smallSecret" type="password" name="secret" autocomplete="off"
               placeholder="Secret" maxlength=100 required autofocus/>
        <textarea id="largeSecret" name="secret"
                  autocomplete="off" spellcheck="false" wrap="off"
                  placeholder="Secret" maxlength=2000 required  style="display: none" disabled/></textarea>
        <div class="inputWrapper">
          <button id="expandButton" class="greyButton" type="button" title="Expand to text block mode"
                  onclick="expandSecret()" style="display: none">Expand</button>
          <button id="contractButton" class="greyButton" type="button" title="Shrink to single line mode"
                  onclick="contractSecret()" style="display: none">Shrink</button>
          <select name="ttl" title="How long before the link expires" required>
            <option value="5m">5 minutes</option>
            <option value="15m">15 minutes</option>
            <option value="30m">30 minutes</option>
            <option value="1h">1 hour</option>
          </select>
        </div>
        <button id="submitButton" class="mainButton">Generate Link</button>
      </form>
    </main>
  </body>
  <script type="text/javascript">
    const smallSecret = document.getElementById('smallSecret');
    const expandButton = document.getElementById('expandButton');
    const largeSecret = document.getElementById('largeSecret');
    const contractButton = document.getElementById('contractButton');

    function expandSecret() {
      expandButton.style.display = 'none';
      smallSecret.disabled = true;
      smallSecret.style.display = 'none';

      largeSecret.style.removeProperty('display');
      largeSecret.disabled = false;
      contractButton.style.removeProperty('display');

      largeSecret.focus();
    }

    function contractSecret() {
      contractButton.style.display = 'none';
      largeSecret.disabled = true;
      largeSecret.style.display = 'none';

      smallSecret.style.removeProperty('display');
      smallSecret.disabled = false;
      expandButton.style.removeProperty('display');

      smallSecret.focus();
    }

    expandButton.style.removeProperty('display');
  </script>
</html>
